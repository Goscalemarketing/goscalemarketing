<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Test de DiagnÃ³stico Â· Go Scale</title>
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.1.1/model-viewer.min.js"></script>
  <style>
    body { margin: 0; background: #111; color: white; font-family: sans-serif; height: 100vh; overflow: hidden; }
    model-viewer { width: 100%; height: 100%; background: #0b0b0b; }
    
    .ar-button {
      position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%);
      padding: 20px 40px; background: #FF3B30; color: white; border: none;
      border-radius: 12px; font-weight: bold; z-index: 100;
    }

    /* Consola de depuraciÃ³n en pantalla para ver quÃ© pasa en el AR */
    #debug-console {
      position: fixed; top: 10px; left: 10px; right: 10px;
      background: rgba(0,0,0,0.8); padding: 10px; font-size: 12px;
      border-radius: 8px; pointer-events: none; z-index: 10000;
      border: 1px solid #444;
    }
  </style>
</head>
<body>

  <div id="debug-console">Esperando sesiÃ³n AR...</div>

  <model-viewer
    id="diagnostic-mv"
    src="Pruebas.glb"
    ar
    ar-modes="webxr"
    ar-placement="floor"
    ar-scale="fixed"
    camera-controls
    
    /* PRUEBA DE FLOTACIÃ“N: Elevamos el objetivo de la cÃ¡mara */
    camera-target="0m 0.3m 0m"
    
    exposure="1.2"
    shadow-intensity="1"
  >
    <button slot="ar-button" class="ar-button">
      INICIAR TEST DE FLOTACIÃ“N
    </button>
  </model-viewer>

  <script>
    const mv = document.querySelector('#diagnostic-mv');
    const debug = document.querySelector('#debug-console');

    // FunciÃ³n para escribir en nuestra "consola" de mÃ³vil
    function log(msg) {
      debug.innerHTML = msg;
      console.log(msg);
    }

    // 1. Detectar cuando entramos
    mv.addEventListener('ar-status', (event) => {
      log("Estado AR: " + event.detail.status);
    });

    // 2. Detectar si el sistema encuentra el suelo
    mv.addEventListener('ar-hit-test-achieved', () => {
      log("âœ… Suelo detectado. <br>Busca el recuadro azul y TOCA.");
    });

    // 3. Detectar clics en la pantalla durante el AR
    window.addEventListener('click', () => {
      if (mv.canActivateAR) {
        log("ðŸ–±ï¸ Clic detectado en pantalla...");
      }
    });

    // 4. Detectar si el modelo se ha colocado
    mv.addEventListener('ar-hit-test-select', () => {
      log("ðŸŽ¯ Â¡OBJETO COLOCADO! <br>Ahora intenta moverlo con un dedo.");
    });

  </script>
</body>
</html>
